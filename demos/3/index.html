<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Particles</title>
    <link href="/css/site.css" rel="stylesheet">
</head>
<body>

    <header class="container-full text-center page-header header-compact">
        <h1>Particles</h1>

        <h2 class="lead">Force Fields</h2>
    </header>
    <div class="container page">
        <canvas id="main" width="800" height="500"></canvas>

        <div>resource: http://html5hub.com/build-a-javascript-particle-system/</div>
    </div>

<script src="../common/js/utils.js"></script>

<script src="../common/js/Particle.js"></script>
<script src="../common/js/ParticleEmitter.js"></script>
<script src="../common/js/ParticleEngine.js"></script>
<script src="../common/js/ParticleExploder.js"></script>
<script src="../common/js/Field.js"></script>

<script>
    var canvas = document.getElementById('main');
    canvas.width = canvas.parentNode.clientWidth;
    var ctx = canvas.getContext('2d');

    var emitter1 = new ParticleEmitter(canvas, {
        point: {x: 100, y: 400},
        vector: {x: 3, y: 0}
    });

    var exploder = new ParticleExploder(canvas, {initialVitality: 300, hasGravity: false});

    Particle.prototype.fields = [
        new Field(canvas, {position: {x: 600, y: 150}, mass: -400}),
        new Field(canvas, {position: {x: 300, y: 320}, mass: 200})
    ];

    function tick() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        emitter1.draw();
        exploder.draw();

        for (var i in Particle.prototype.fields) {
            Particle.prototype.fields[i].draw();
        }
    }


    setInterval(tick, 1000 / 60);

</script>
</body>
</html>
