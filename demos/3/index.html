<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Particles</title>
    <style>
        html, body {
            background: black;
            color: white;
            padding: 0;
            margin: 0;
        }
    </style>
</head>
<body>
    <canvas id="main" width="800" height="500"></canvas>

    <div>resource: http://html5hub.com/build-a-javascript-particle-system/</div>

    <script src="../common/utils.js"></script>

    <script src="../common/Particle.js"></script>
    <script src="../common/ParticleEmitter.js"></script>
    <script src="js/Field.js"></script>

    <script>
        var canvas = document.getElementById('main');
        canvas.width = window.innerWidth;
        var ctx = canvas.getContext('2d');

        var emitter1 = new ParticleEmitter(canvas, {point: {x: 200, y: 300}, vector: {x: 3, y: 0}});

        Particle.prototype.fields = [
            new Field(canvas, {mass: -400}),
            new Field(canvas, {position: {x: 400, y: 250}, mass: 200})
        ];

        function tick () {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            emitter1.draw();

            for (var i in Particle.prototype.fields) {
                Particle.prototype.fields[i].draw();
            }
        }

        function resizeCanvas() {
            canvas.width = window.innerWidth;
//            canvas.height = window.innerHeight;

            tick();
        }
        window.addEventListener('resize', resizeCanvas, false);
        resizeCanvas();

        setInterval(tick, 1000/60);

    </script>
</body>
</html>
