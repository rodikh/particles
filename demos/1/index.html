<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Particles</title>
    <link href="/css/site.css" rel="stylesheet">
</head>
<body>

    <header class="container-full text-center page-header header-compact">
        <h1>Particles</h1>

        <h2 class="lead">Particle Emitters</h2>
    </header>
    <div class="container page">

        <canvas id="main" height="600"></canvas>

        <div>
            based on: http://gamedevelopment.tutsplus.com/tutorials/quick-tip-use-quadtrees-to-detect-likely-collisions-in-2d-space--gamedev-374
        </div>
    </div>

<script type="text/javascript" src="../../bower_components/dat-gui/build/dat.gui.min.js"></script>
<script src="../common/js/utils.js"></script>

<script src="../common/js/Particle.js"></script>
<script src="../common/js/ParticleEngine.js"></script>
<script src="../common/js/ParticleExploder.js"></script>
<script src="../common/js/ParticleEmitter.js"></script>
<script src="../common/js/Field.js"></script>
<script src="../common/js/MouseField.js"></script>

<script>
    var canvas = document.getElementById('main');
    canvas.width = canvas.parentNode.clientWidth;
    var ctx = canvas.getContext('2d');

    var engine = new ParticleEngine(canvas);
    var exploder = new ParticleExploder(canvas, {hasGravity: true});
    var emitter1 = new ParticleEmitter(canvas, {isDecaying: true});
    var emitter2 = new ParticleEmitter(canvas, {point: {x:50, y: 100}, particleColor: '0,255,0', isDecaying: true});
    var emitter3 = new ParticleEmitter(canvas, {point: {x:50, y: 150}, particleColor: '0,0,255', isDecaying: true});

    function tick () {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        engine.draw();
        exploder.draw();
        emitter1.draw();
        emitter2.draw();
        emitter3.draw();
    }

    setInterval(tick, 1000/60);

    var mouseField = new MouseField(canvas, {gui: true});

    // TODO: Dat.gui slide particle count, spawn new and remove old (fifo)
</script>
</body>
</html>
